
    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>keywords</title>
        <style>
        /* Base styles */
:root {
    --tv-primary-color: #2962FF;
    --tv-secondary-color: #1E88E5;
    --tv-background-color: #FFFFFF;
    --tv-border-color: #e0e3eb;
    --tv-text-color: #131722;
    --tv-text-secondary: #787B86;
    --tv-code-background: #F0F3FA;
}

body {
    font-family: -apple-system,BlinkMacSystemFont,Trebuchet MS,Roboto,Ubuntu,sans-serif;
    line-height: 1.6;
    color: var(--tv-text-color);
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
    background: #F8F9FD;
}

/* TOC styles */
#toc-container {
    background: var(--tv-background-color);
    padding: 24px;
    border-radius: 8px;
    margin-bottom: 30px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    border: 1px solid var(--tv-border-color);
}

.section-dropdown {
    margin: 12px 0;
}

.section-title {
    background: var(--tv-primary-color);
    color: white;
    padding: 12px 16px;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: 600;
    font-size: 15px;
}

.section-content {
    display: none;
    padding: 12px 16px;
    background: var(--tv-code-background);
    border-radius: 0 0 4px 4px;
    margin-top: 1px;
}

.section-content.active {
    display: block;
}

.section-content ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.section-content li {
    margin: 8px 0;
}

.section-content a {
    color: var(--tv-primary-color);
    text-decoration: none;
    font-size: 14px;
}

.section-content a:hover {
    text-decoration: underline;
}

#searchInput {
    width: 100%;
    padding: 12px;
    margin: 12px 0;
    border: 1px solid var(--tv-border-color);
    border-radius: 4px;
    font-size: 14px;
    background: var(--tv-code-background);
}

/* Content section styles */
.content-section {
    background: var(--tv-background-color);
    padding: 24px;
    margin: 20px 0;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    border: 1px solid var(--tv-border-color);
}

/* Header styles */
.tv-pine-reference-item__header {
    font-size: 24px;
    color: var(--tv-text-color);
    margin: 0 0 20px 0;
    padding-bottom: 16px;
    border-bottom: 2px solid var(--tv-border-color);
    font-weight: 600;
}

.tv-pine-reference-item__sub-header {
    color-scheme: light;
    font-feature-settings: "tnum" on,"lnum" on;
    color: #5d606b;
    font-size: 10px;
    margin-top: 24px;
    text-transform: uppercase;
}

/* Text styles */
.tv-pine-reference-item__text {
    margin: 12px 0;
    font-size: 15px;
    line-height: 1.6;
    color: var(--tv-text-color);
}

/* Code block styles */
pre {
    background: var(--tv-code-background);
    padding: 16px;
    border-radius: 4px;
    overflow-x: auto;
    border: 1px solid var(--tv-border-color);
    margin: 16px 0;
}

code {
    font-family: 'JetBrains Mono', 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', monospace;
    font-size: 14px;
    color: var(--tv-text-color);
}

/* Type section */
.type-section {
    /*
    background: var(--tv-code-background);
    padding: 16px;
    border-radius: 4px;
    margin: 16px 0;
    border: 1px solid var(--tv-border-color);
    */
}

.type-section strong {
    color: var(--tv-text-color);
    font-weight: 600;
}

/* Example section */
.example-section {
    /*background: var(--tv-code-background);
    padding: 16px;
    border-radius: 4px;
    margin: 16px 0;
    border: 1px solid var(--tv-border-color);*/
}

.example-section strong {
    color-scheme: light;
    font-feature-settings: "tnum" on,"lnum" on;
    color: #5d606b;
    font-size: 10px;
    margin-top: 24px;
    text-transform: uppercase;
}

/* See also section */
.tv-pine-reference-item__see-also {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 16px;
}

.tv-tag-label {
    background: var(--tv-code-background);
    padding: 6px 12px;
    border-radius: 4px;
    font-size: 13px;
    color: var(--tv-primary-color);
    border: 1px solid var(--tv-border-color);
}

/* Navigation */
.nav-buttons {
    position: fixed;
    bottom: 24px;
    right: 24px;
    display: flex;
    gap: 12px;
    z-index: 1000;
}

.nav-button {
    background: var(--tv-primary-color);
    color: white;
    padding: 12px 24px;
    border-radius: 4px;
    border: none;
    cursor: pointer;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    font-weight: 600;
    font-size: 14px;
    transition: background-color 0.2s ease;
}

.nav-button:hover {
    background: var(--tv-secondary-color);
}

/* Function signatures */
.tv-pine-reference-item__signature {
    font-family: 'JetBrains Mono', monospace;
    background: var(--tv-code-background);
    padding: 16px;
    border-radius: 4px;
    margin: 16px 0;
    border: 1px solid var(--tv-border-color);
    overflow-x: auto;
}

/* Parameter lists */
.tv-pine-reference-item__parameters {
    margin: 16px 0;
}

.tv-pine-reference-item__parameter {
    margin: 12px 0;
    padding-left: 16px;
    border-left: 3px solid var(--tv-border-color);
}

.parameter-name {
    font-family: 'JetBrains Mono', monospace;
    color: var(--tv-primary-color);
    font-weight: 600;
}

/* Returns section */
.tv-pine-reference-item__returns {
    margin: 16px 0;
    padding: 16px;
    background: var(--tv-code-background);
    border-radius: 4px;
    border: 1px solid var(--tv-border-color);
}

/* Description lists */
dl {
    margin: 16px 0;
}

dt {
    font-weight: 600;
    color: var(--tv-text-color);
    margin-top: 12px;
}

dd {
    margin-left: 16px;
    color: var(--tv-text-secondary);
}

/* Tables */
table {
    width: 100%;
    border-collapse: collapse;
    margin: 16px 0;
}

th, td {
    padding: 12px;
    border: 1px solid var(--tv-border-color);
    text-align: left;
}

th {
    background: var(--tv-code-background);
    font-weight: 600;
}
        </style>
    </head>
    <body id="top">
        <h1 class="tv-pine-reference-item__header">keywords</h1>
        <section id="pine-script-reference_v5_kw_and.html" class="content-section">
<h2 class="tv-pine-reference-item__header">pine-script-reference_v5_kw_and</h2>
<div class="content-section">
<div class="tv-pine-reference-item__content"><div class="tv-pine-reference-item__header-wrapper"><div class="tv-pine-reference-item__header_h3_wrapper"><h3 class="tv-pine-reference-item__header">and</h3></div></div><div class="tv-pine-reference-item__text tv-text">Logical AND. Applicable to boolean expressions.</div><div class="tv-pine-reference-item__sub-header">Syntax</div><pre class="tv-pine-reference-item__syntax selected">expr1 and expr2</pre><div class="tv-pine-reference-item__sub-header">Returns</div><div class="tv-pine-reference-item__text tv-text">Boolean value, or series of boolean values.</div></div>
</div>
</section><section id="pine-script-reference_v5_kw_enum.html" class="content-section">
<h2 class="tv-pine-reference-item__header">pine-script-reference_v5_kw_enum</h2>
<div class="content-section">
<div class="tv-pine-reference-item__content"><div class="tv-pine-reference-item__header-wrapper"><div class="tv-pine-reference-item__header_h3_wrapper"><h3 class="tv-pine-reference-item__header">enum</h3></div></div><div class="tv-pine-reference-item__text tv-text">This keyword allows the creation of an enumeration, enum for short. Enums are unique constructs that hold groups of predefined constants.</div><div class="tv-pine-reference-item__text tv-text">Each field in an enum has a <code>const string</code> title. Scripts can access the fields in an enum using dot notation, similar to accessing the fields of a user-defined type.</div><div class="tv-pine-reference-item__text tv-text">Each field represents a value of the <code>enumName</code> enum. Scripts can declare each field in an <code>enum</code> with an optional <code>const string</code> title. If a field's title is not specified, its title is the string representation of its name. Use <a class="js-reference" data-href="fun_str.tostring" href="#fun_str.tostring">str.tostring</a> on an enum field to retrieve its title.</div><div class="tv-pine-reference-item__sub-header">Syntax</div><pre class="tv-pine-reference-item__syntax selected">[export ]enum &lt;enumName&gt; 
&lt;field_1&gt; [= &lt;title_1&gt;] 
&lt;field_2&gt; [= &lt;title_2&gt;] 
... 
&lt;field_N&gt; [= &lt;title_N&gt;]</pre><div class="tv-pine-reference-item__text tv-text">One can use an enum to quickly create a dropdown input with the help of the <a class="js-reference" data-href="fun_input.enum" href="#fun_input.enum">input.enum</a> function. The options that appear in the dropdown represent the titles of the enum fields.</div><div class="tv-pine-reference-item__sub-header tv-pine-reference-item__example-header"><div class="example-section"><span>Example</span></div></div><pre class="tv-pine-reference-item__example"><code class="tv-pine-light" data-id="kw_enum_example_0" data-lang="pine_v5"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br/><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Session highlight"</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">overlay</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk11">true</span><span class="mtk13">)</span></span><br/><span><span></span></span><br/><span><span class="mtk9">//</span><span class="mtk9 mtkb">@enum</span><span class="mtk9">        Contains fields with popular timezones as </span><span class="mtk9">titles.</span></span><br/><span><span class="mtk9">//</span><span class="mtk9 mtkb">@field</span><span class="mtk9"> exch  Has an empty string as the title to represe</span><span class="mtk9">nt the chart timezone.</span></span><br/><span><span class="mtk18">enum</span><span class="mtk1"> </span><span class="mtk33">tz</span></span><br/><span><span class="mtk1">    </span><span class="mtk33">utc</span><span class="mtk1">  </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk29">"UTC"</span></span><br/><span><span class="mtk1">    </span><span class="mtk33">exch</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk29">""</span></span><br/><span><span class="mtk1">    </span><span class="mtk33">ny</span><span class="mtk1">   </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk29">"America/New_York"</span></span><br/><span><span class="mtk1">    </span><span class="mtk33">chi</span><span class="mtk1">  </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk29">"America/Chicago"</span></span><br/><span><span class="mtk1">    </span><span class="mtk33">lon</span><span class="mtk1">  </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk29">"Europe/London"</span></span><br/><span><span class="mtk1">    </span><span class="mtk33">tok</span><span class="mtk1">  </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk29">"Asia/Tokyo"</span></span><br/><span><span></span></span><br/><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9"> The session string.</span></span><br/><span><span class="mtk33">selectedSession</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk16">input.session</span><span class="mtk13">(</span><span class="mtk29">"1200-1500"</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk29">"Session"</span><span class="mtk13">)</span></span><br/><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9"> The selected timezone. The input's dropdown conta</span><span class="mtk9">ins the fields in the `tz` enum.</span></span><br/><span><span class="mtk33">selectedTimezone</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk16">input.enum</span><span class="mtk13">(</span><span class="mtk33">tz</span><span class="mtk1">.</span><span class="mtk33">utc</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk29">"Session Timezone"</span><span class="mtk13">)</span></span><br/><span><span></span></span><br/><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9"> Is `true` if the current bar's time is in the spe</span><span class="mtk9">cified session.</span></span><br/><span><span class="mtk18 mtkb">bool</span><span class="mtk1"> </span><span class="mtk33">inSession</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk11">false</span></span><br/><span><span class="mtk18">if</span><span class="mtk1"> </span><span class="mtk18">not</span><span class="mtk1"> </span><span class="mtk16">na</span><span class="mtk13">(</span><span class="mtk16">time</span><span class="mtk13">(</span><span class="mtk29">""</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">selectedSession</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk33">selectedTimezone</span><span class="mtk13">)))</span></span><br/><span><span class="mtk1">    </span><span class="mtk33">inSession</span><span class="mtk1"> </span><span class="mtk18">:=</span><span class="mtk1"> </span><span class="mtk11">true</span></span><br/><span><span></span></span><br/><span><span class="mtk9">// Highlight the background when `inSession` is `t</span><span class="mtk9">rue`.</span></span><br/><span><span class="mtk16">bgcolor</span><span class="mtk13">(</span><span class="mtk33">inSession</span><span class="mtk1"> </span><span class="mtk18">?</span><span class="mtk1"> </span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.green</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">90</span><span class="mtk13">)</span><span class="mtk1"> </span><span class="mtk18">:</span><span class="mtk1"> </span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">title</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk29">"Active session highlight"</span><span class="mtk13">)</span></span><br/></code></pre><div class="tv-pine-reference-item__text tv-text">Additionally, one can use an enum in a collection's type template to restrict the values it will allow as elements. When used inside a type template, the collection will only accept fields that belong to the specified enum.</div><div class="tv-pine-reference-item__sub-header tv-pine-reference-item__example-header"><span>Example</span></div><pre class="tv-pine-reference-item__example"><code class="tv-pine-light" data-id="kw_enum_example_1" data-lang="pine_v5"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br/><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Map with enum keys"</span><span class="mtk13">)</span></span><br/><span><span></span></span><br/><span><span class="mtk9">//</span><span class="mtk9 mtkb">@enum</span><span class="mtk9">        Contains fields with titles representing t</span><span class="mtk9">icker IDs.</span></span><br/><span><span class="mtk9">//</span><span class="mtk9 mtkb">@field</span><span class="mtk9"> aapl  Has an Apple ticker ID as its title.</span></span><br/><span><span class="mtk9">//</span><span class="mtk9 mtkb">@field</span><span class="mtk9"> tsla  Has a Tesla ticker ID as its title.</span></span><br/><span><span class="mtk9">//</span><span class="mtk9 mtkb">@field</span><span class="mtk9"> amzn  Has an Amazon ticker ID as its title.</span></span><br/><span><span class="mtk18">enum</span><span class="mtk1"> </span><span class="mtk33">symbols</span></span><br/><span><span class="mtk1">    </span><span class="mtk33">aapl</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk29">"NASDAQ:AAPL"</span></span><br/><span><span class="mtk1">    </span><span class="mtk33">tsla</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk29">"NASDAQ:TSLA"</span></span><br/><span><span class="mtk1">    </span><span class="mtk33">amzn</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk29">"NASDAQ:AMZN"</span></span><br/><span><span></span></span><br/><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9"> A map that accepts fields from the `symbols` enum</span><span class="mtk9"> as keys and "float" values.</span></span><br/><span><span class="mtk18 mtkb">map</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">symbols</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;</span><span class="mtk1"> </span><span class="mtk33">data</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk16">map.new</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">symbols</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;()</span></span><br/><span><span class="mtk9">// Put key-value pairs into the `data` map.</span></span><br/><span><span class="mtk33">data</span><span class="mtk1">.</span><span class="mtk15">put</span><span class="mtk13">(</span><span class="mtk33">symbols</span><span class="mtk1">.</span><span class="mtk33">aapl</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk33">symbols</span><span class="mtk1">.</span><span class="mtk33">aapl</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk11">timeframe.period</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk11">close</span><span class="mtk13">))</span></span><br/><span><span class="mtk33">data</span><span class="mtk1">.</span><span class="mtk15">put</span><span class="mtk13">(</span><span class="mtk33">symbols</span><span class="mtk1">.</span><span class="mtk33">tsla</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk33">symbols</span><span class="mtk1">.</span><span class="mtk33">tsla</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk11">timeframe.period</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk11">close</span><span class="mtk13">))</span></span><br/><span><span class="mtk33">data</span><span class="mtk1">.</span><span class="mtk15">put</span><span class="mtk13">(</span><span class="mtk33">symbols</span><span class="mtk1">.</span><span class="mtk33">amzn</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk33">symbols</span><span class="mtk1">.</span><span class="mtk33">amzn</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk11">timeframe.period</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk11">close</span><span class="mtk13">))</span></span><br/><span><span class="mtk9">// Plot the value from the `data` map accessed by </span><span class="mtk9">the `symbols.aapl` key.</span></span><br/><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">data</span><span class="mtk1">.</span><span class="mtk15">get</span><span class="mtk13">(</span><span class="mtk33">symbols</span><span class="mtk1">.</span><span class="mtk33">aapl</span><span class="mtk13">))</span></span><br/></code></pre></div>
</div>
</section><section id="pine-script-reference_v5_kw_export.html" class="content-section">
<h2 class="tv-pine-reference-item__header">pine-script-reference_v5_kw_export</h2>
<div class="content-section">
<div class="tv-pine-reference-item__content"><div class="tv-pine-reference-item__header-wrapper"><div class="tv-pine-reference-item__header_h3_wrapper"><h3 class="tv-pine-reference-item__header">export</h3></div></div><div class="tv-pine-reference-item__text tv-text">Used in libraries to prefix the declaration of functions or user-defined type definitions that will be available from other scripts importing the library.</div><div class="tv-pine-reference-item__sub-header tv-pine-reference-item__example-header"><div class="example-section"><span>Example</span></div></div><pre class="tv-pine-reference-item__example"><code class="tv-pine-light" data-id="kw_export" data-lang="pine_v5"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br/><span><span class="mtk9">//</span><span class="mtk9 mtkb">@description</span><span class="mtk9"> Library of debugging functions.</span></span><br/><span><span class="mtk16">library</span><span class="mtk13">(</span><span class="mtk29">"Debugging_library"</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">overlay</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk11">true</span><span class="mtk13">)</span></span><br/><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9"> Displays a string as a table cell for debugging p</span><span class="mtk9">urposes.</span></span><br/><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9"> txt String to display.</span></span><br/><span><span class="mtk9">//</span><span class="mtk9 mtkb">@returns</span><span class="mtk9"> Void.</span></span><br/><span><span class="mtk18">export</span><span class="mtk1"> </span><span class="mtk33">print</span><span class="mtk13">(</span><span class="mtk18 mtkb">string</span><span class="mtk1"> </span><span class="mtk33">txt</span><span class="mtk13">)</span><span class="mtk1"> </span><span class="mtk18">=&gt;</span><span class="mtk1"> </span></span><br/><span><span class="mtk1">    </span><span class="mtk18">var</span><span class="mtk1"> </span><span class="mtk18 mtkb">table</span><span class="mtk1"> </span><span class="mtk33">t</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk16">table.new</span><span class="mtk13">(</span><span class="mtk11">position.middle_right</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">1</span><span class="mtk13">)</span></span><br/><span><span class="mtk1">    </span><span class="mtk16">table.cell</span><span class="mtk13">(</span><span class="mtk33">t</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">txt</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">bgcolor</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk11">color.yellow</span><span class="mtk13">)</span></span><br/><span><span class="mtk9">// Using the function from inside the library to s</span><span class="mtk9">how an example on the published chart.</span></span><br/><span><span class="mtk9">// This has no impact on scripts using the library</span><span class="mtk9">.</span></span><br/><span><span class="mtk15">print</span><span class="mtk13">(</span><span class="mtk29">"Library Test"</span><span class="mtk13">)</span></span><br/></code></pre><div class="tv-pine-reference-item__sub-header">Remarks</div><div class="tv-pine-reference-item__text tv-text">Each library must have at least one exported function or user-defined type (UDT).</div><div class="tv-pine-reference-item__text tv-text">Exported functions cannot use variables from the global scope if they are arrays, mutable variables (reassigned with <code>:=</code>), or variables of 'input' form.</div><div class="tv-pine-reference-item__text tv-text">Exported functions cannot use <code>request.*()</code> functions.</div><div class="tv-pine-reference-item__text tv-text">Exported functions must explicitly declare each parameter's type and all parameters must be used in the function's body. By default, all arguments passed to exported functions are of the <a class="js-reference" data-href="type_series" href="#type_series">series</a> form, unless they are explicitly specified as <a class="js-reference" data-href="type_simple" href="#type_simple">simple</a> in the function's signature.</div><div class="tv-pine-reference-item__text tv-text">The @description, @function, @param, @type, @field, and @returns compiler annotations are used to automatically generate the library's description and release notes, and in the Pine Script® Editor's tooltips.</div><div class="tv-pine-reference-item__sub-header">See also</div><div class="tv-pine-reference-item__see-also"><a class="tv-tag-label js-reference" data-href="fun_library" href="#fun_library">library</a><a class="tv-tag-label js-reference" data-href="kw_import" href="#kw_import">import</a><a class="tv-tag-label js-reference" data-href="type_simple" href="#type_simple">simple</a><a class="tv-tag-label js-reference" data-href="type_series" href="#type_series">series</a><a class="tv-tag-label js-reference" data-href="kw_type" href="#kw_type">type</a></div></div>
</div>
</section><section id="pine-script-reference_v5_kw_for...in.html" class="content-section">
<h2 class="tv-pine-reference-item__header">pine-script-reference_v5_kw_for...in</h2>
<div class="content-section">
<div class="tv-pine-reference-item__content"><div class="tv-pine-reference-item__header-wrapper"><div class="tv-pine-reference-item__header_h3_wrapper"><h3 class="tv-pine-reference-item__header">for...in</h3></div></div><div class="tv-pine-reference-item__text tv-text">The <code>for...in</code> structure allows the repeated execution of a number of statements for each element in an array. It can be used with either one argument: <code>array_element</code>, or with two: <code>[index, array_element]</code>. The second form doesn't affect the functionality of the loop. It tracks the current iteration's index in the tuple's first variable.</div><div class="tv-pine-reference-item__sub-header">Syntax</div><pre class="tv-pine-reference-item__syntax selected">[var_declaration =] for array_element in array_id
    statements | continue | break
    return_expression

[var_declaration =] for [index, array_element] in array_id
    statements | continue | break
    return_expression</pre><div class="tv-pine-reference-item__text tv-text"><strong>var_declaration</strong> - An optional variable declaration that will be assigned the value of the loop's <code>return_expression</code>.</div><div class="tv-pine-reference-item__text tv-text"><strong>index</strong> - An optional variable that tracks the current iteration's index. Indexing starts at 0. The variable is immutable in the loop's body. When used, it must be included in a tuple also containing <code>array_element</code>.</div><div class="tv-pine-reference-item__text tv-text"><strong>array_element</strong> - A variable containing each successive array element to be processed in the loop. The variable is immutable in the loop's body.</div><div class="tv-pine-reference-item__text tv-text"><strong>array_id</strong> - The ID of the array over which the loop is iterated.</div><div class="tv-pine-reference-item__text tv-text"><strong>statements | continue | break</strong> - Any number of statements, or the 'continue' or 'break' keywords, indented by 4 spaces or a tab.</div><div class="tv-pine-reference-item__text tv-text"><strong>return_expression</strong> - The loop's return value assigned to the variable in <code>var_declaration</code>, if one is present. If the loop exits because of a 'continue' or 'break' keyword, the loop's return value is that of the last variable assigned a value before the loop's exit.</div><div class="tv-pine-reference-item__text tv-text"><strong>continue</strong> - A keyword that can only be used in loops. It causes the next iteration of the loop to be executed.</div><div class="tv-pine-reference-item__text tv-text"><strong>break</strong> - A keyword that exits the loop.</div><div class="tv-pine-reference-item__text tv-text">Scripts can modify arrays and matrices while iterating over their elements with this structure. However, maps cannot change while looping through their key-value pairs. To modify a map within a <code>for...in</code> loop, iterate over the key-value pairs of a copy or over the elements in its <a class="js-reference" data-href="fun_map.keys" href="#fun_map.keys">map.keys</a> array.</div><div class="tv-pine-reference-item__text tv-text">Here, we use the single-argument form of <code>for...in</code> to determine on each bar how many of the bar's OHLC values are greater than the SMA of 'close' values:</div><div class="tv-pine-reference-item__sub-header tv-pine-reference-item__example-header"><div class="example-section"><span>Example</span></div></div><pre class="tv-pine-reference-item__example"><code class="tv-pine-light" data-id="kw_for...in_example_1" data-lang="pine_v5"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br/><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"for...in"</span><span class="mtk13">)</span></span><br/><span><span class="mtk9">// Here we determine on each bar how many of the b</span><span class="mtk9">ar's OHLC values are greater than the SMA of 'clos</span><span class="mtk9">e' values</span></span><br/><span><span class="mtk18 mtkb">float</span><span class="mtk13">[]</span><span class="mtk1"> </span><span class="mtk33">ohlcValues</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk16">array.from</span><span class="mtk13">(</span><span class="mtk11">open</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk11">low</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk11">close</span><span class="mtk13">)</span></span><br/><span><span class="mtk15">qtyGreaterThan</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">array</span><span class="mtk13">)</span><span class="mtk1"> </span><span class="mtk18">=&gt;</span></span><br/><span><span class="mtk1">    </span><span class="mtk18 mtkb">int</span><span class="mtk1"> </span><span class="mtk33">result</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk12">0</span></span><br/><span><span class="mtk1">    </span><span class="mtk18">for</span><span class="mtk1"> </span><span class="mtk33">currentElement</span><span class="mtk1"> </span><span class="mtk18">in</span><span class="mtk1"> </span><span class="mtk18 mtkb">array</span></span><br/><span><span class="mtk1">        </span><span class="mtk18">if</span><span class="mtk1"> </span><span class="mtk33">currentElement</span><span class="mtk1"> </span><span class="mtk18">&gt;</span><span class="mtk1"> </span><span class="mtk33">value</span></span><br/><span><span class="mtk1">            </span><span class="mtk33">result</span><span class="mtk1"> </span><span class="mtk18">+=</span><span class="mtk1"> </span><span class="mtk12">1</span></span><br/><span><span class="mtk1">        </span><span class="mtk33">result</span></span><br/><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">qtyGreaterThan</span><span class="mtk13">(</span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">20</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">ohlcValues</span><span class="mtk13">))</span></span><br/></code></pre><div class="tv-pine-reference-item__text tv-text">Here, we use the two-argument form of <a class="js-reference" data-href="kw_for...in" href="#kw_for...in">for...in</a> to set the values of our <code>isPos</code> array to <code>true</code> when their corresponding value in our <code>valuesArray</code> array is positive:</div><div class="tv-pine-reference-item__sub-header tv-pine-reference-item__example-header"><span>Example</span></div><pre class="tv-pine-reference-item__example"><code class="tv-pine-light" data-id="kw_for...in_example_2" data-lang="pine_v5"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br/><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"for...in"</span><span class="mtk13">)</span></span><br/><span><span class="mtk18">var</span><span class="mtk1"> </span><span class="mtk33">valuesArray</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk16">array.from</span><span class="mtk13">(</span><span class="mtk12">4</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">-8</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">11</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">78</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">-16</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">34</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">7</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">99</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">55</span><span class="mtk13">)</span></span><br/><span><span class="mtk18">var</span><span class="mtk1"> </span><span class="mtk33">isPos</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk16">array.new_bool</span><span class="mtk13">(</span><span class="mtk12">10</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk11">false</span><span class="mtk13">)</span></span><br/><span><span></span></span><br/><span><span class="mtk18">for</span><span class="mtk1"> </span><span class="mtk13">[</span><span class="mtk33">index</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">value</span><span class="mtk13">]</span><span class="mtk1"> </span><span class="mtk18">in</span><span class="mtk1"> </span><span class="mtk33">valuesArray</span></span><br/><span><span class="mtk1">    </span><span class="mtk18">if</span><span class="mtk1"> </span><span class="mtk33">value</span><span class="mtk1"> </span><span class="mtk18">&gt;</span><span class="mtk1"> </span><span class="mtk12">0</span></span><br/><span><span class="mtk1">        </span><span class="mtk16">array.set</span><span class="mtk13">(</span><span class="mtk33">isPos</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">index</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk11">true</span><span class="mtk13">)</span></span><br/><span><span></span></span><br/><span><span class="mtk18">if</span><span class="mtk1"> </span><span class="mtk11">barstate.islastconfirmedhistory</span></span><br/><span><span class="mtk1">    </span><span class="mtk16">label.new</span><span class="mtk13">(</span><span class="mtk11">bar_index</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk33">isPos</span><span class="mtk13">))</span></span><br/></code></pre><div class="tv-pine-reference-item__text tv-text">Iterate through matrix rows as arrays.</div><div class="tv-pine-reference-item__sub-header tv-pine-reference-item__example-header"><span>Example</span></div><pre class="tv-pine-reference-item__example"><code class="tv-pine-light" data-id="kw_for...in_example_3" data-lang="pine_v5"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br/><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"`for ... in` matrix Example"</span><span class="mtk13">)</span></span><br/><span><span></span></span><br/><span><span class="mtk9">// Create a 2x3 matrix with values `4`.</span></span><br/><span><span class="mtk33">matrix1</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk16">matrix.new</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">int</span><span class="mtk13">&gt;(</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">3</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">4</span><span class="mtk13">)</span></span><br/><span><span></span></span><br/><span><span class="mtk33">sum</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk12">0.0</span></span><br/><span><span class="mtk9">// Loop through every row of the matrix.</span></span><br/><span><span class="mtk18">for</span><span class="mtk1"> </span><span class="mtk33">rowArray</span><span class="mtk1"> </span><span class="mtk18">in</span><span class="mtk1"> </span><span class="mtk33">matrix1</span></span><br/><span><span class="mtk1">    </span><span class="mtk9">// Sum values of the every row </span></span><br/><span><span class="mtk1">    </span><span class="mtk33">sum</span><span class="mtk1"> </span><span class="mtk18">+=</span><span class="mtk1"> </span><span class="mtk16">array.sum</span><span class="mtk13">(</span><span class="mtk33">rowArray</span><span class="mtk13">)</span></span><br/><span><span></span></span><br/><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">sum</span><span class="mtk13">)</span></span><br/></code></pre><div class="tv-pine-reference-item__sub-header">See also</div><div class="tv-pine-reference-item__see-also"><a class="tv-tag-label js-reference" data-href="kw_for" href="#kw_for">for</a><a class="tv-tag-label js-reference" data-href="kw_while" href="#kw_while">while</a><a class="tv-tag-label js-reference" data-href="fun_array.sum" href="#fun_array.sum">array.sum</a><a class="tv-tag-label js-reference" data-href="fun_array.min" href="#fun_array.min">array.min</a><a class="tv-tag-label js-reference" data-href="fun_array.max" href="#fun_array.max">array.max</a></div></div>
</div>
</section><section id="pine-script-reference_v5_kw_for.html" class="content-section">
<h2 class="tv-pine-reference-item__header">pine-script-reference_v5_kw_for</h2>
<div class="content-section">
<div class="tv-pine-reference-item__content"><div class="tv-pine-reference-item__header-wrapper"><div class="tv-pine-reference-item__header_h3_wrapper"><h3 class="tv-pine-reference-item__header">for</h3></div></div><div class="tv-pine-reference-item__text tv-text">The 'for' structure allows the repeated execution of a number of statements:</div><div class="tv-pine-reference-item__sub-header">Syntax</div><pre class="tv-pine-reference-item__syntax selected">[var_declaration =] for counter = from_num to to_num [by step_num]
    statements | continue | break
    return_expression</pre><div class="tv-pine-reference-item__text tv-text"><strong>var_declaration</strong> - An optional variable declaration that will be assigned the value of the loop's return_expression.</div><div class="tv-pine-reference-item__text tv-text"><strong>counter</strong> - A variable holding the value of the loop's counter, which is incremented/decremented by 1 or by the step_num value on each iteration of the loop.</div><div class="tv-pine-reference-item__text tv-text"><strong>from_num</strong> - The starting value of the counter. "series int/float" values/expressions are allowed.</div><div class="tv-pine-reference-item__text tv-text"><strong>to_num</strong> - The end value of the counter. When the counter becomes greater than to_num (or less than to_num in cases where from_num &gt; to_num) the loop is broken. "series int/float" values/expressions are allowed, but they are evaluated only on the loop's first iteration.</div><div class="tv-pine-reference-item__text tv-text"><strong>step_num</strong> - The increment/decrement value of the counter. It is optional. The default value is +1 or -1, depending on which of from_num or to_num is the greatest. When a value is used, the counter is also incremented/decremented depending on which of from_num or to_num is the greatest, so the +/- sign of step_num is optional.</div><div class="tv-pine-reference-item__text tv-text"><strong>statements | continue | break</strong> - Any number of statements, or the 'continue' or 'break' keywords, indented by 4 spaces or a tab.</div><div class="tv-pine-reference-item__text tv-text"><strong>return_expression</strong> - The loop's return value which is assigned to the variable in var_declaration if one is present. If the loop exits because of a 'continue' or 'break' keyword, the loop's return value is that of the last variable assigned a value before the loop's exit.</div><div class="tv-pine-reference-item__text tv-text"><strong>continue</strong> - A keyword that can only be used in loops. It causes the next iteration of the loop to be executed.</div><div class="tv-pine-reference-item__text tv-text"><strong>break</strong> - A keyword that exits the loop.</div><div class="tv-pine-reference-item__sub-header tv-pine-reference-item__example-header"><div class="example-section"><span>Example</span></div></div><pre class="tv-pine-reference-item__example"><code class="tv-pine-light" data-id="kw_for_example_0" data-lang="pine_v5"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br/><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"for"</span><span class="mtk13">)</span></span><br/><span><span class="mtk9">// Here, we count the quantity of bars in a given </span><span class="mtk9">'lookback' length which closed above the current b</span><span class="mtk9">ar's close</span></span><br/><span><span class="mtk15">qtyOfHigherCloses</span><span class="mtk13">(</span><span class="mtk33">lookback</span><span class="mtk13">)</span><span class="mtk1"> </span><span class="mtk18">=&gt;</span></span><br/><span><span class="mtk1">    </span><span class="mtk18 mtkb">int</span><span class="mtk1"> </span><span class="mtk33">result</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk12">0</span></span><br/><span><span class="mtk1">    </span><span class="mtk18">for</span><span class="mtk1"> </span><span class="mtk33">i</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk12">1</span><span class="mtk1"> </span><span class="mtk18">to</span><span class="mtk1"> </span><span class="mtk33">lookback</span></span><br/><span><span class="mtk1">        </span><span class="mtk18">if</span><span class="mtk1"> </span><span class="mtk11">close</span><span class="mtk13">[</span><span class="mtk33">i</span><span class="mtk13">]</span><span class="mtk1"> </span><span class="mtk18">&gt;</span><span class="mtk1"> </span><span class="mtk11">close</span></span><br/><span><span class="mtk1">            </span><span class="mtk33">result</span><span class="mtk1"> </span><span class="mtk18">+=</span><span class="mtk1"> </span><span class="mtk12">1</span></span><br/><span><span class="mtk1">    </span><span class="mtk33">result</span></span><br/><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">qtyOfHigherCloses</span><span class="mtk13">(</span><span class="mtk12">14</span><span class="mtk13">))</span></span><br/></code></pre><div class="tv-pine-reference-item__sub-header tv-pine-reference-item__example-header"><span>Example</span></div><pre class="tv-pine-reference-item__example"><code class="tv-pine-light" data-id="kw_for_example_1" data-lang="pine_v5"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br/><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"`for` loop with a step"</span><span class="mtk13">)</span></span><br/><span><span></span></span><br/><span><span class="mtk33">a</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk16">array.from</span><span class="mtk13">(</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">3</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">4</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">5</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">6</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">7</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">8</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">9</span><span class="mtk13">)</span></span><br/><span><span class="mtk33">sum</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk12">0.0</span></span><br/><span><span></span></span><br/><span><span class="mtk18">for</span><span class="mtk1"> </span><span class="mtk33">i</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk12">0</span><span class="mtk1"> </span><span class="mtk18">to</span><span class="mtk1"> </span><span class="mtk12">9</span><span class="mtk1"> </span><span class="mtk18">by</span><span class="mtk1"> </span><span class="mtk12">5</span></span><br/><span><span class="mtk1">    </span><span class="mtk9">// Because the step is set to 5, we are adding onl</span><span class="mtk9">y the first (0) and the sixth (5) value from the a</span><span class="mtk9">rray `a`.</span></span><br/><span><span class="mtk1">    </span><span class="mtk33">sum</span><span class="mtk1"> </span><span class="mtk18">+=</span><span class="mtk1"> </span><span class="mtk16">array.get</span><span class="mtk13">(</span><span class="mtk33">a</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">i</span><span class="mtk13">)</span></span><br/><span><span></span></span><br/><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">sum</span><span class="mtk13">)</span></span><br/></code></pre><div class="tv-pine-reference-item__sub-header">See also</div><div class="tv-pine-reference-item__see-also"><a class="tv-tag-label js-reference" data-href="kw_for...in" href="#kw_for...in">for...in</a><a class="tv-tag-label js-reference" data-href="kw_while" href="#kw_while">while</a></div></div>
</div>
</section><section id="pine-script-reference_v5_kw_if.html" class="content-section">
<h2 class="tv-pine-reference-item__header">pine-script-reference_v5_kw_if</h2>
<div class="content-section">
<div class="tv-pine-reference-item__content"><div class="tv-pine-reference-item__header-wrapper"><div class="tv-pine-reference-item__header_h3_wrapper"><h3 class="tv-pine-reference-item__header">if</h3></div></div><div class="tv-pine-reference-item__text tv-text">If statement defines what block of statements must be executed when conditions of the expression are satisfied.</div><div class="tv-pine-reference-item__text tv-text">To have access to and use the if statement, one should specify the version &gt;= 2 of Pine Script® language in the very first line of code, for example: //@version=5</div><div class="tv-pine-reference-item__text tv-text">The 4th version of Pine Script® Language allows you to use “else if” syntax.</div><div class="tv-pine-reference-item__text tv-text">General code form:</div><div class="tv-pine-reference-item__sub-header">Syntax</div><pre class="tv-pine-reference-item__syntax selected">var_declarationX = if condition
    var_decl_then0
    var_decl_then1
    …
    var_decl_thenN
else if [optional block]
    var_decl_else0
    var_decl_else1
    …
    var_decl_elseN
else
    var_decl_else0
    var_decl_else1
    …
    var_decl_elseN
    return_expression_else</pre><div class="tv-pine-reference-item__text tv-text">where</div><div class="tv-pine-reference-item__text tv-text"><strong>var_declarationX</strong> — this variable gets the value of the if statement</div><div class="tv-pine-reference-item__text tv-text"><strong>condition</strong> — if the condition is true, the logic from the block 'then' (var_decl_then0, var_decl_then1, etc.) is used.</div><div class="tv-pine-reference-item__text tv-text">If the condition is false, the logic from the block 'else' (var_decl_else0, var_decl_else1, etc.) is used.</div><div class="tv-pine-reference-item__text tv-text"><strong>return_expression_then</strong>, <strong>return_expression_else</strong> — the last expression from the block then or from the block else will return the final value of the statement. If declaration of the variable is in the end, its value will be the result.</div><div class="tv-pine-reference-item__text tv-text">The type of returning value of the if statement depends on return_expression_then and return_expression_else type (their types must match: it is not possible to return an integer value from then, while you have a string value in else block).</div><div class="tv-pine-reference-item__sub-header tv-pine-reference-item__example-header"><div class="example-section"><span>Example</span></div></div><pre class="tv-pine-reference-item__example"><code class="tv-pine-light" data-id="kw_if_example_0" data-lang="pine_v5"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br/><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"if"</span><span class="mtk13">)</span></span><br/><span><span class="mtk9">// This code compiles</span></span><br/><span><span class="mtk33">x</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk18">if</span><span class="mtk1"> </span><span class="mtk11">close</span><span class="mtk1"> </span><span class="mtk18">&gt;</span><span class="mtk1"> </span><span class="mtk11">open</span></span><br/><span><span class="mtk1">    </span><span class="mtk11">close</span></span><br/><span><span class="mtk18">else</span></span><br/><span><span class="mtk1">    </span><span class="mtk11">open</span></span><br/><span><span></span></span><br/><span><span class="mtk9">// This code doesn’t compile</span></span><br/><span><span class="mtk9">// y = if close &gt; open</span></span><br/><span><span class="mtk9">//     close</span></span><br/><span><span class="mtk9">// else</span></span><br/><span><span class="mtk9">//     "open"</span></span><br/><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">x</span><span class="mtk13">)</span></span><br/></code></pre><div class="tv-pine-reference-item__text tv-text">It is possible to omit the <code>else</code> block. In this case if the condition is false, an “empty” value (na, false, or “”) will be assigned to the var_declarationX variable:</div><div class="tv-pine-reference-item__sub-header tv-pine-reference-item__example-header"><span>Example</span></div><pre class="tv-pine-reference-item__example"><code class="tv-pine-light" data-id="kw_if_example_1" data-lang="pine_v5"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br/><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"if"</span><span class="mtk13">)</span></span><br/><span><span class="mtk33">x</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk18">if</span><span class="mtk1"> </span><span class="mtk11">close</span><span class="mtk1"> </span><span class="mtk18">&gt;</span><span class="mtk1"> </span><span class="mtk11">open</span></span><br/><span><span class="mtk1">    </span><span class="mtk11">close</span></span><br/><span><span class="mtk9">// If current close &gt; current open, then x = close</span><span class="mtk9">.</span></span><br/><span><span class="mtk9">// Otherwise the x = na.</span></span><br/><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">x</span><span class="mtk13">)</span></span><br/></code></pre><div class="tv-pine-reference-item__text tv-text">It is possible to use either multiple “else if” blocks or none at all. The blocks “then”, “else if”, “else” are shifted by four spaces:</div><div class="tv-pine-reference-item__sub-header tv-pine-reference-item__example-header"><span>Example</span></div><pre class="tv-pine-reference-item__example"><code class="tv-pine-light" data-id="kw_if_example_2" data-lang="pine_v5"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br/><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"if"</span><span class="mtk13">)</span></span><br/><span><span class="mtk33">x</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk18">if</span><span class="mtk1"> </span><span class="mtk11">open</span><span class="mtk1"> </span><span class="mtk18">&gt;</span><span class="mtk1"> </span><span class="mtk11">close</span></span><br/><span><span class="mtk1">    </span><span class="mtk12">5</span></span><br/><span><span class="mtk18">else</span><span class="mtk1"> </span><span class="mtk18">if</span><span class="mtk1"> </span><span class="mtk11">high</span><span class="mtk1"> </span><span class="mtk18">&gt;</span><span class="mtk1"> </span><span class="mtk11">low</span></span><br/><span><span class="mtk1">    </span><span class="mtk11">close</span></span><br/><span><span class="mtk18">else</span></span><br/><span><span class="mtk1">    </span><span class="mtk11">open</span></span><br/><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">x</span><span class="mtk13">)</span></span><br/></code></pre><div class="tv-pine-reference-item__text tv-text">It is possible to ignore the resulting value of an <code>if</code> statement (“var_declarationX=“ can be omitted). It may be useful if you need the side effect of the expression, for example in strategy trading:</div><div class="tv-pine-reference-item__sub-header tv-pine-reference-item__example-header"><span>Example</span></div><pre class="tv-pine-reference-item__example"><code class="tv-pine-light" data-id="kw_if_example_3" data-lang="pine_v5"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br/><span><span class="mtk16">strategy</span><span class="mtk13">(</span><span class="mtk29">"if"</span><span class="mtk13">)</span></span><br/><span><span class="mtk18">if</span><span class="mtk1"> </span><span class="mtk13">(</span><span class="mtk16">ta.crossover</span><span class="mtk13">(</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk11">low</span><span class="mtk13">))</span></span><br/><span><span class="mtk1">    </span><span class="mtk16">strategy.entry</span><span class="mtk13">(</span><span class="mtk29">"BBandLE"</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk11">strategy.long</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">stop</span><span class="mtk18">=</span><span class="mtk11">low</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">oca_name</span><span class="mtk18">=</span><span class="mtk29">"BollingerBands"</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">oca_type</span><span class="mtk18">=</span><span class="mtk11">strategy.oca.cancel</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">comment</span><span class="mtk18">=</span><span class="mtk29">"BBandLE"</span><span class="mtk13">)</span></span><br/><span><span class="mtk18">else</span></span><br/><span><span class="mtk1">    </span><span class="mtk16">strategy.cancel</span><span class="mtk13">(</span><span class="mtk33">id</span><span class="mtk18">=</span><span class="mtk29">"BBandLE"</span><span class="mtk13">)</span></span><br/></code></pre><div class="tv-pine-reference-item__text tv-text">If statements can include each other:</div><div class="tv-pine-reference-item__sub-header tv-pine-reference-item__example-header"><span>Example</span></div><pre class="tv-pine-reference-item__example"><code class="tv-pine-light" data-id="kw_if_example_4" data-lang="pine_v5"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br/><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"if"</span><span class="mtk13">)</span></span><br/><span><span class="mtk18 mtkb">float</span><span class="mtk1"> </span><span class="mtk33">x</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk11">na</span></span><br/><span><span class="mtk18">if</span><span class="mtk1"> </span><span class="mtk11">close</span><span class="mtk1"> </span><span class="mtk18">&gt;</span><span class="mtk1"> </span><span class="mtk11">open</span></span><br/><span><span class="mtk1">    </span><span class="mtk18">if</span><span class="mtk1"> </span><span class="mtk11">close</span><span class="mtk1"> </span><span class="mtk18">&gt;</span><span class="mtk1"> </span><span class="mtk11">close</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">]</span></span><br/><span><span class="mtk1">        </span><span class="mtk33">x</span><span class="mtk1"> </span><span class="mtk18">:=</span><span class="mtk1"> </span><span class="mtk11">close</span></span><br/><span><span class="mtk1">    </span><span class="mtk18">else</span></span><br/><span><span class="mtk1">        </span><span class="mtk33">x</span><span class="mtk1"> </span><span class="mtk18">:=</span><span class="mtk1"> </span><span class="mtk11">close</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">]</span></span><br/><span><span class="mtk18">else</span></span><br/><span><span class="mtk1">    </span><span class="mtk33">x</span><span class="mtk1"> </span><span class="mtk18">:=</span><span class="mtk1"> </span><span class="mtk11">open</span></span><br/><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">x</span><span class="mtk13">)</span></span><br/></code></pre></div>
</div>
</section><section id="pine-script-reference_v5_kw_import.html" class="content-section">
<h2 class="tv-pine-reference-item__header">pine-script-reference_v5_kw_import</h2>
<div class="content-section">
<div class="tv-pine-reference-item__content"><div class="tv-pine-reference-item__header-wrapper"><div class="tv-pine-reference-item__header_h3_wrapper"><h3 class="tv-pine-reference-item__header">import</h3></div></div><div class="tv-pine-reference-item__text tv-text">Used to load an external <a class="js-reference" data-href="fun_library" href="#fun_library">library</a> into a script and bind its functions to a namespace. The importing script can be an indicator, a strategy, or another library. A library must be published (privately or publicly) before it can be imported.</div><div class="tv-pine-reference-item__sub-header">Syntax</div><pre class="tv-pine-reference-item__syntax selected">import {username}/{libraryName}/{libraryVersion} as {alias}</pre><div class="tv-pine-reference-item__sub-header">Arguments</div><div class="tv-pine-reference-item__text tv-text"><span class="tv-pine-reference-item__arg-type">username (literal string) </span>User name of the library's author.</div><div class="tv-pine-reference-item__text tv-text"><span class="tv-pine-reference-item__arg-type">libraryName (literal string) </span>Name of the imported library, which corresponds to the <code>title</code> argument used by the author in his library script.</div><div class="tv-pine-reference-item__text tv-text"><span class="tv-pine-reference-item__arg-type">libraryVersion (literal int) </span>Version number of the imported library.</div><div class="tv-pine-reference-item__text tv-text"><span class="tv-pine-reference-item__arg-type">alias (literal string) </span>A non-numeric identifier used as a namespace to refer to the library's functions. Optional. The default is the <code>libraryName</code> string.</div><div class="tv-pine-reference-item__sub-header tv-pine-reference-item__example-header"><div class="example-section"><span>Example</span></div></div><pre class="tv-pine-reference-item__example"><code class="tv-pine-light" data-id="kw_import" data-lang="pine_v5"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br/><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"num_methods import"</span><span class="mtk13">)</span></span><br/><span><span class="mtk9">// Import the first version of the username’s </span><span class="mtk9">"num_methods" library and assign it to the "m" </span><span class="mtk9">namespace",</span></span><br/><span><span class="mtk18">import</span><span class="mtk1"> </span><span class="mtk16">username/num_methods/1</span><span class="mtk1"> </span><span class="mtk18">as</span><span class="mtk1"> </span><span class="mtk17">m</span></span><br/><span><span class="mtk9">// Call the “sinh()” function from the imported </span><span class="mtk9">library</span></span><br/><span><span class="mtk33">y</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk33">m</span><span class="mtk1">.</span><span class="mtk15">sinh</span><span class="mtk13">(</span><span class="mtk12">3.14</span><span class="mtk13">)</span></span><br/><span><span class="mtk9">// Plot value returned by the "sinh()" function",</span></span><br/><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">y</span><span class="mtk13">)</span></span><br/></code></pre><div class="tv-pine-reference-item__sub-header">Remarks</div><div class="tv-pine-reference-item__text tv-text">Using an alias that replaces a built-in namespace such as math.* or strategy.* is allowed, but if the library contains function names that shadow Pine Script®'s built-in functions, the built-ins will become unavailable. The same version of a library can only be imported once. Aliases must be distinct for each imported library. When calling library functions, casting their arguments to types other than their declared type is not allowed. An import statement cannot use 'as' or 'import' as <code>username</code>, <code>libraryName</code>, or <code>alias</code> identifiers.</div><div class="tv-pine-reference-item__sub-header">See also</div><div class="tv-pine-reference-item__see-also"><a class="tv-tag-label js-reference" data-href="fun_library" href="#fun_library">library</a><a class="tv-tag-label js-reference" data-href="kw_export" href="#kw_export">export</a></div></div>
</div>
</section><section id="pine-script-reference_v5_kw_method.html" class="content-section">
<h2 class="tv-pine-reference-item__header">pine-script-reference_v5_kw_method</h2>
<div class="content-section">
<div class="tv-pine-reference-item__content"><div class="tv-pine-reference-item__header-wrapper"><div class="tv-pine-reference-item__header_h3_wrapper"><h3 class="tv-pine-reference-item__header">method</h3></div></div><div class="tv-pine-reference-item__text tv-text">This keyword is used to prefix a function declaration, indicating it can then be invoked using dot notation by appending its name to a variable of the type of its first parameter and omitting that first parameter. Alternatively, functions declared as methods can also be invoked like normal user-defined functions. In that case, an argument must be supplied for its first parameter.</div><div class="tv-pine-reference-item__text tv-text">The first parameter of a method declaration must be explicitly typified.</div><div class="tv-pine-reference-item__sub-header">Syntax</div><pre class="tv-pine-reference-item__syntax selected">[export] method &lt;functionName&gt;(&lt;paramType&gt; &lt;paramName&gt; [= &lt;defaultValue&gt;], …) =&gt;
    &lt;functionBlock&gt;</pre><div class="tv-pine-reference-item__sub-header tv-pine-reference-item__example-header"><div class="example-section"><span>Example</span></div></div><pre class="tv-pine-reference-item__example"><code class="tv-pine-light" data-id="kw_method" data-lang="pine_v5"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br/><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">""</span><span class="mtk13">)</span></span><br/><span><span></span></span><br/><span><span class="mtk18">var</span><span class="mtk1"> </span><span class="mtk33">prices</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk16">array.new</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;()</span></span><br/><span><span></span></span><br/><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9"> Pushes a new value into the array and removes the</span><span class="mtk9"> first one if the resulting array is greater than </span><span class="mtk9">`maxSize`. Can be used as a method.</span></span><br/><span><span class="mtk18">method</span><span class="mtk1"> </span><span class="mtk33">maintainArray</span><span class="mtk13">(</span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;</span><span class="mtk1"> </span><span class="mtk33">id</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">maxSize</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk1"> </span><span class="mtk18">=&gt;</span></span><br/><span><span class="mtk1">    </span><span class="mtk33">id</span><span class="mtk1">.</span><span class="mtk15">push</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">)</span></span><br/><span><span class="mtk1">    </span><span class="mtk18">if</span><span class="mtk1"> </span><span class="mtk33">id</span><span class="mtk1">.</span><span class="mtk15">size</span><span class="mtk13">()</span><span class="mtk1"> </span><span class="mtk18">&gt;</span><span class="mtk1"> </span><span class="mtk33">maxSize</span></span><br/><span><span class="mtk1">        </span><span class="mtk33">id</span><span class="mtk1">.</span><span class="mtk15">shift</span><span class="mtk13">()</span></span><br/><span><span></span></span><br/><span><span class="mtk33">prices</span><span class="mtk1">.</span><span class="mtk15">maintainArray</span><span class="mtk13">(</span><span class="mtk12">50</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk11">close</span><span class="mtk13">)</span></span><br/><span><span class="mtk9">// The method can also be called like a function, </span><span class="mtk9">without using dot notation.</span></span><br/><span><span class="mtk9">// In this case an argument must be supplied for i</span><span class="mtk9">ts first parameter.</span></span><br/><span><span class="mtk9">// maintainArray(prices, 50, close)</span></span><br/><span><span></span></span><br/><span><span class="mtk9">// This calls the `array.avg()` built-in using dot</span><span class="mtk9"> notation with the `prices` array.</span></span><br/><span><span class="mtk9">// It is possible because built-in functions belon</span><span class="mtk9">ging to some namespaces that are a special Pine ty</span><span class="mtk9">pe</span></span><br/><span><span class="mtk9">// can be invoked with method notation when the fu</span><span class="mtk9">nction's first parameter is an ID of that type.</span></span><br/><span><span class="mtk9">// Those namespaces are: `array`, `matrix`, `line`</span><span class="mtk9">, `linefill`, `label`, `box`, and `table`.</span></span><br/><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">prices</span><span class="mtk1">.</span><span class="mtk15">avg</span><span class="mtk13">())</span></span><br/></code></pre></div>
</div>
</section><section id="pine-script-reference_v5_kw_not.html" class="content-section">
<h2 class="tv-pine-reference-item__header">pine-script-reference_v5_kw_not</h2>
<div class="content-section">
<div class="tv-pine-reference-item__content"><div class="tv-pine-reference-item__header-wrapper"><div class="tv-pine-reference-item__header_h3_wrapper"><h3 class="tv-pine-reference-item__header">not</h3></div></div><div class="tv-pine-reference-item__text tv-text">Logical negation (NOT). Applicable to boolean expressions.</div><div class="tv-pine-reference-item__sub-header">Syntax</div><pre class="tv-pine-reference-item__syntax selected">not expr1</pre><div class="tv-pine-reference-item__sub-header">Returns</div><div class="tv-pine-reference-item__text tv-text">Boolean value, or series of boolean values.</div></div>
</div>
</section><section id="pine-script-reference_v5_kw_or.html" class="content-section">
<h2 class="tv-pine-reference-item__header">pine-script-reference_v5_kw_or</h2>
<div class="content-section">
<div class="tv-pine-reference-item__content"><div class="tv-pine-reference-item__header-wrapper"><div class="tv-pine-reference-item__header_h3_wrapper"><h3 class="tv-pine-reference-item__header">or</h3></div></div><div class="tv-pine-reference-item__text tv-text">Logical OR. Applicable to boolean expressions.</div><div class="tv-pine-reference-item__sub-header">Syntax</div><pre class="tv-pine-reference-item__syntax selected">expr1 or expr2</pre><div class="tv-pine-reference-item__sub-header">Returns</div><div class="tv-pine-reference-item__text tv-text">Boolean value, or series of boolean values.</div></div>
</div>
</section><section id="pine-script-reference_v5_kw_switch.html" class="content-section">
<h2 class="tv-pine-reference-item__header">pine-script-reference_v5_kw_switch</h2>
<div class="content-section">
<div class="tv-pine-reference-item__content"><div class="tv-pine-reference-item__header-wrapper"><div class="tv-pine-reference-item__header_h3_wrapper"><h3 class="tv-pine-reference-item__header">switch</h3></div></div><div class="tv-pine-reference-item__text tv-text">The switch operator transfers control to one of the several statements, depending on the values of a condition and expressions.</div><div class="tv-pine-reference-item__sub-header">Syntax</div><pre class="tv-pine-reference-item__syntax selected">[variable_declaration = ] switch expression
    value1 =&gt; local_block
    value2 =&gt; local_block
    …
    =&gt; default_local_block

[variable_declaration = ] switch
    condition1 =&gt; local_block
    condition2 =&gt; local_block
    …
    =&gt; default_local_block</pre><div class="tv-pine-reference-item__text tv-text">Switch with an expression:</div><div class="tv-pine-reference-item__sub-header tv-pine-reference-item__example-header"><div class="example-section"><span>Example</span></div></div><pre class="tv-pine-reference-item__example"><code class="tv-pine-light" data-id="kw_switch_example_0" data-lang="pine_v5"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br/><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Switch using an expression"</span><span class="mtk13">)</span></span><br/><span><span></span></span><br/><span><span class="mtk18 mtkb">string</span><span class="mtk1"> </span><span class="mtk33">i_maType</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk16">input.string</span><span class="mtk13">(</span><span class="mtk29">"EMA"</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk29">"MA type"</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">options</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk13">[</span><span class="mtk29">"EMA"</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk29">"SMA"</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk29">"RMA"</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk29">"WMA"</span><span class="mtk13">])</span></span><br/><span><span></span></span><br/><span><span class="mtk18 mtkb">float</span><span class="mtk1"> </span><span class="mtk33">ma</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk18">switch</span><span class="mtk1"> </span><span class="mtk33">i_maType</span></span><br/><span><span class="mtk1">    </span><span class="mtk29">"EMA"</span><span class="mtk1"> </span><span class="mtk18">=&gt;</span><span class="mtk1"> </span><span class="mtk16">ta.ema</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">10</span><span class="mtk13">)</span></span><br/><span><span class="mtk1">    </span><span class="mtk29">"SMA"</span><span class="mtk1"> </span><span class="mtk18">=&gt;</span><span class="mtk1"> </span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">10</span><span class="mtk13">)</span></span><br/><span><span class="mtk1">    </span><span class="mtk29">"RMA"</span><span class="mtk1"> </span><span class="mtk18">=&gt;</span><span class="mtk1"> </span><span class="mtk16">ta.rma</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">10</span><span class="mtk13">)</span></span><br/><span><span class="mtk1">    </span><span class="mtk9">// Default used when the three first cases do not </span><span class="mtk9">match.</span></span><br/><span><span class="mtk1">    </span><span class="mtk18">=&gt;</span><span class="mtk1"> </span><span class="mtk16">ta.wma</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">10</span><span class="mtk13">)</span></span><br/><span><span></span></span><br/><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">ma</span><span class="mtk13">)</span></span><br/></code></pre><div class="tv-pine-reference-item__text tv-text">Switch without an expression:</div><div class="tv-pine-reference-item__sub-header tv-pine-reference-item__example-header"><span>Example</span></div><pre class="tv-pine-reference-item__example"><code class="tv-pine-light" data-id="kw_switch_example_1" data-lang="pine_v5"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br/><span><span class="mtk16">strategy</span><span class="mtk13">(</span><span class="mtk29">"Switch without an expression"</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">overlay</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk11">true</span><span class="mtk13">)</span></span><br/><span><span></span></span><br/><span><span class="mtk18 mtkb">bool</span><span class="mtk1"> </span><span class="mtk33">longCondition</span><span class="mtk1">  </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk16">ta.crossover</span><span class="mtk13">(</span><span class="mtk1"> </span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">14</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">28</span><span class="mtk13">))</span></span><br/><span><span class="mtk18 mtkb">bool</span><span class="mtk1"> </span><span class="mtk33">shortCondition</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk16">ta.crossunder</span><span class="mtk13">(</span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">14</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">28</span><span class="mtk13">))</span></span><br/><span><span></span></span><br/><span><span class="mtk18">switch</span></span><br/><span><span class="mtk1">    </span><span class="mtk33">longCondition</span><span class="mtk1">  </span><span class="mtk18">=&gt;</span><span class="mtk1"> </span><span class="mtk16">strategy.entry</span><span class="mtk13">(</span><span class="mtk29">"Long ID"</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk11">strategy.long</span><span class="mtk13">)</span></span><br/><span><span class="mtk1">    </span><span class="mtk33">shortCondition</span><span class="mtk1"> </span><span class="mtk18">=&gt;</span><span class="mtk1"> </span><span class="mtk16">strategy.entry</span><span class="mtk13">(</span><span class="mtk29">"Short ID"</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk11">strategy.short</span><span class="mtk13">)</span></span><br/></code></pre><div class="tv-pine-reference-item__sub-header">Returns</div><div class="tv-pine-reference-item__text tv-text">The value of the last expression in the local block of statements that is executed.</div><div class="tv-pine-reference-item__sub-header">Remarks</div><div class="tv-pine-reference-item__text tv-text">Only one of the <code>local_block</code> instances or the <code>default_local_block</code> can be executed. The <code>default_local_block</code> is introduced with the <code>=&gt;</code> token alone and is only executed when none of the preceding blocks are executed. If the result of the <code>switch</code> statement is assigned to a variable and a <code>default_local_block</code> is not specified, the statement returns <code>na</code> if no <code>local_block</code> is executed. When assigning the result of the <code>switch</code> statement to a variable, all <code>local_block</code> instances must return the same type of value.</div><div class="tv-pine-reference-item__sub-header">See also</div><div class="tv-pine-reference-item__see-also"><a class="tv-tag-label js-reference" data-href="kw_if" href="#kw_if">if</a><a class="tv-tag-label js-reference" data-href="op_?:" href="#op_?:">?:</a></div></div>
</div>
</section><section id="pine-script-reference_v5_kw_type.html" class="content-section">
<h2 class="tv-pine-reference-item__header">pine-script-reference_v5_kw_type</h2>
<div class="content-section">
<div class="tv-pine-reference-item__content"><div class="tv-pine-reference-item__header-wrapper"><div class="tv-pine-reference-item__header_h3_wrapper"><h3 class="tv-pine-reference-item__header">type</h3></div></div><div class="tv-pine-reference-item__text tv-text">This keyword allows the declaration of user-defined types (UDT) from which scripts can instantiate objects. UDTs are composite types that contain an arbitrary number of fields of any built-in or user-defined type, including the defined UDT itself. The syntax to define a UDT is:</div><div class="tv-pine-reference-item__sub-header">Syntax</div><pre class="tv-pine-reference-item__syntax selected">[export ]type &lt;UDT_identifier&gt;
    [varip ]&lt;field_type&gt; &lt;field_name&gt; [= &lt;value&gt;]
    …</pre><div class="tv-pine-reference-item__text tv-text">Once a UDT is defined, scripts can instantiate objects from it with the <code>UDT_identifier.new()</code> construct. When creating a new type instance, the fields of the resulting object will initialize with the default values from the UDT's definition. Any type fields without specified defaults will initialize as <a class="js-reference" data-href="var_na" href="#var_na">na</a>. Alternatively, users can pass initial values as arguments in the <code>*.new()</code> method to override the type's defaults. For example, <code>newFooObject = foo.new(x = true)</code> assigns a new <code>foo</code> object to the <code>newFooObject</code> variable with its <code>x</code> field initialized using a value of <a class="js-reference" data-href="const_true" href="#const_true">true</a>.</div><div class="tv-pine-reference-item__text tv-text">Field declarations can include the <a class="js-reference" data-href="kw_varip" href="#kw_varip">varip</a> keyword, in which case the field values persist between successive script iterations on the same bar.</div><div class="tv-pine-reference-item__text tv-text">For more information see the User Manual's sections on <a href="https://www.tradingview.com/pine-script-docs/language/type-system#user-defined-types" target="_blank">defining UDTs</a> and <a href="https://www.tradingview.com/pine-script-docs/language/objects/" target="_blank">using objects</a>.</div><div class="tv-pine-reference-item__text tv-text">Libraries can export UDTs. See the<a href="https://www.tradingview.com/pine-script-docs/concepts/libraries/#user-defined-types-and-objects" target="_blank">Libraries</a> page of our User Manual to learn more.</div><div class="tv-pine-reference-item__sub-header tv-pine-reference-item__example-header"><div class="example-section"><span>Example</span></div></div><pre class="tv-pine-reference-item__example"><code class="tv-pine-light" data-id="kw_type_example_0" data-lang="pine_v5"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br/><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Multi Time Period Chart"</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">overlay</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk11">true</span><span class="mtk13">)</span></span><br/><span><span></span></span><br/><span><span class="mtk33">timeframeInput</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk16">input.timeframe</span><span class="mtk13">(</span><span class="mtk29">"1D"</span><span class="mtk13">)</span></span><br/><span><span></span></span><br/><span><span class="mtk18">type</span><span class="mtk1"> </span><span class="mtk33">bar</span></span><br/><span><span class="mtk1">    </span><span class="mtk18 mtkb">float</span><span class="mtk1"> </span><span class="mtk33">o</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk11">open</span></span><br/><span><span class="mtk1">    </span><span class="mtk18 mtkb">float</span><span class="mtk1"> </span><span class="mtk33">h</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk11">high</span></span><br/><span><span class="mtk1">    </span><span class="mtk18 mtkb">float</span><span class="mtk1"> </span><span class="mtk33">l</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk11">low</span></span><br/><span><span class="mtk1">    </span><span class="mtk18 mtkb">float</span><span class="mtk1"> </span><span class="mtk33">c</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk11">close</span></span><br/><span><span class="mtk1">    </span><span class="mtk18 mtkb">int</span><span class="mtk1">   </span><span class="mtk33">t</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk11">time</span></span><br/><span><span></span></span><br/><span><span class="mtk15">drawBox</span><span class="mtk13">(</span><span class="mtk18 mtkb">bar</span><span class="mtk1"> </span><span class="mtk33">b</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">right</span><span class="mtk13">)</span><span class="mtk1"> </span><span class="mtk18">=&gt;</span></span><br/><span><span class="mtk1">    </span><span class="mtk18 mtkb">bar</span><span class="mtk1"> </span><span class="mtk33">s</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk33">bar</span><span class="mtk1">.</span><span class="mtk15">new</span><span class="mtk13">()</span></span><br/><span><span class="mtk1">    </span><span class="mtk18 mtkb">color</span><span class="mtk1"> </span><span class="mtk33">boxColor</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk33">b</span><span class="mtk1">.</span><span class="mtk33">c</span><span class="mtk1"> </span><span class="mtk18">&gt;=</span><span class="mtk1"> </span><span class="mtk33">b</span><span class="mtk1">.</span><span class="mtk33">o</span><span class="mtk1"> </span><span class="mtk18">?</span><span class="mtk1"> </span><span class="mtk11">color.green</span><span class="mtk1"> </span><span class="mtk18">:</span><span class="mtk1"> </span><span class="mtk11">color.red</span></span><br/><span><span class="mtk1">    </span><span class="mtk16">box.new</span><span class="mtk13">(</span><span class="mtk33">b</span><span class="mtk1">.</span><span class="mtk33">t</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">b</span><span class="mtk1">.</span><span class="mtk33">h</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">right</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">b</span><span class="mtk1">.</span><span class="mtk33">l</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">boxColor</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">xloc</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk11">xloc.bar_time</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">bgcolor</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk33">boxColor</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">90</span><span class="mtk13">))</span></span><br/><span><span></span></span><br/><span><span class="mtk15">updateBox</span><span class="mtk13">(</span><span class="mtk18 mtkb">box</span><span class="mtk1"> </span><span class="mtk33">boxId</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk18 mtkb">bar</span><span class="mtk1"> </span><span class="mtk33">b</span><span class="mtk13">)</span><span class="mtk1"> </span><span class="mtk18">=&gt;</span></span><br/><span><span class="mtk1">    </span><span class="mtk18 mtkb">color</span><span class="mtk1"> </span><span class="mtk33">boxColor</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk33">b</span><span class="mtk1">.</span><span class="mtk33">c</span><span class="mtk1"> </span><span class="mtk18">&gt;=</span><span class="mtk1"> </span><span class="mtk33">b</span><span class="mtk1">.</span><span class="mtk33">o</span><span class="mtk1"> </span><span class="mtk18">?</span><span class="mtk1"> </span><span class="mtk11">color.green</span><span class="mtk1"> </span><span class="mtk18">:</span><span class="mtk1"> </span><span class="mtk11">color.red</span></span><br/><span><span class="mtk1">    </span><span class="mtk16">box.set_border_color</span><span class="mtk13">(</span><span class="mtk33">boxId</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">boxColor</span><span class="mtk13">)</span></span><br/><span><span class="mtk1">    </span><span class="mtk16">box.set_bgcolor</span><span class="mtk13">(</span><span class="mtk33">boxId</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk33">boxColor</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk12">90</span><span class="mtk13">))</span></span><br/><span><span class="mtk1">    </span><span class="mtk16">box.set_top</span><span class="mtk13">(</span><span class="mtk33">boxId</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">b</span><span class="mtk1">.</span><span class="mtk33">h</span><span class="mtk13">)</span></span><br/><span><span class="mtk1">    </span><span class="mtk16">box.set_bottom</span><span class="mtk13">(</span><span class="mtk33">boxId</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">b</span><span class="mtk1">.</span><span class="mtk33">l</span><span class="mtk13">)</span></span><br/><span><span class="mtk1">    </span><span class="mtk16">box.set_right</span><span class="mtk13">(</span><span class="mtk33">boxId</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk11">time</span><span class="mtk13">)</span></span><br/><span><span></span></span><br/><span><span class="mtk33">secBar</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">timeframeInput</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">bar</span><span class="mtk1">.</span><span class="mtk15">new</span><span class="mtk13">())</span></span><br/><span><span></span></span><br/><span><span class="mtk18">if</span><span class="mtk1"> </span><span class="mtk18">not</span><span class="mtk1"> </span><span class="mtk16">na</span><span class="mtk13">(</span><span class="mtk33">secBar</span><span class="mtk13">)</span></span><br/><span><span class="mtk1">    </span><span class="mtk9">// To avoid a runtime error, only process data whe</span><span class="mtk9">n an object exists.</span></span><br/><span><span class="mtk1">    </span><span class="mtk18">if</span><span class="mtk1"> </span><span class="mtk18">not</span><span class="mtk1"> </span><span class="mtk11">barstate.islast</span></span><br/><span><span class="mtk1">        </span><span class="mtk18">if</span><span class="mtk1"> </span><span class="mtk16">timeframe.change</span><span class="mtk13">(</span><span class="mtk33">timeframeInput</span><span class="mtk13">)</span></span><br/><span><span class="mtk1">            </span><span class="mtk9">// On historical bars, draw a new box in the past </span><span class="mtk9">when the HTF closes.</span></span><br/><span><span class="mtk1">            </span><span class="mtk33">drawBox</span><span class="mtk13">(</span><span class="mtk33">secBar</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk11">time</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">])</span></span><br/><span><span class="mtk1">    </span><span class="mtk18">else</span></span><br/><span><span class="mtk1">        </span><span class="mtk18">var</span><span class="mtk1"> </span><span class="mtk18 mtkb">box</span><span class="mtk1"> </span><span class="mtk33">lastBox</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk11">na</span></span><br/><span><span class="mtk1">        </span><span class="mtk18">if</span><span class="mtk1"> </span><span class="mtk16">na</span><span class="mtk13">(</span><span class="mtk33">lastBox</span><span class="mtk13">)</span><span class="mtk1"> </span><span class="mtk18">or</span><span class="mtk1"> </span><span class="mtk16">timeframe.change</span><span class="mtk13">(</span><span class="mtk33">timeframeInput</span><span class="mtk13">)</span></span><br/><span><span class="mtk1">            </span><span class="mtk9">// On the last bar, only draw a new current box th</span><span class="mtk9">e first time we get there or when HTF changes.</span></span><br/><span><span class="mtk1">            </span><span class="mtk33">lastBox</span><span class="mtk1"> </span><span class="mtk18">:=</span><span class="mtk1"> </span><span class="mtk33">drawBox</span><span class="mtk13">(</span><span class="mtk33">secBar</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk11">time</span><span class="mtk13">)</span></span><br/><span><span class="mtk1">        </span><span class="mtk18">else</span></span><br/><span><span class="mtk1">            </span><span class="mtk9">// On other chart updates, use setters to modify t</span><span class="mtk9">he current box.</span></span><br/><span><span class="mtk1">            </span><span class="mtk33">updateBox</span><span class="mtk13">(</span><span class="mtk33">lastBox</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">secBar</span><span class="mtk13">)</span></span><br/></code></pre></div>
</div>
</section><section id="pine-script-reference_v5_kw_var.html" class="content-section">
<h2 class="tv-pine-reference-item__header">pine-script-reference_v5_kw_var</h2>
<div class="content-section">
<div class="tv-pine-reference-item__content"><div class="tv-pine-reference-item__header-wrapper"><div class="tv-pine-reference-item__header_h3_wrapper"><h3 class="tv-pine-reference-item__header">var</h3></div></div><div class="tv-pine-reference-item__text tv-text"><strong>var</strong> is the keyword used for assigning and one-time initializing of the variable.</div><div class="tv-pine-reference-item__text tv-text">Normally, a syntax of assignment of variables, which doesn’t include the keyword var, results in the value of the variable being overwritten with every update of the data. Contrary to that, when assigning variables with the keyword var, they can “keep the state” despite the data updating, only changing it when conditions within if-expressions are met.</div><div class="tv-pine-reference-item__sub-header">Syntax</div><pre class="tv-pine-reference-item__syntax selected">var variable_name = expression</pre><div class="tv-pine-reference-item__text tv-text">where:</div><div class="tv-pine-reference-item__text tv-text"><strong>variable_name</strong> - any name of the user’s variable that’s allowed in Pine Script® (can contain capital and lowercase Latin characters, numbers, and underscores (_), but can’t start with a number).</div><div class="tv-pine-reference-item__text tv-text"><strong>expression</strong> - any arithmetic expression, just as with defining a regular variable. The expression will be calculated and assigned to a variable once.</div><div class="tv-pine-reference-item__sub-header tv-pine-reference-item__example-header"><div class="example-section"><span>Example</span></div></div><pre class="tv-pine-reference-item__example"><code class="tv-pine-light" data-id="kw_var_example_0" data-lang="pine_v5"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br/><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Var keyword example"</span><span class="mtk13">)</span></span><br/><span><span class="mtk18">var</span><span class="mtk1"> </span><span class="mtk33">a</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk11">close</span></span><br/><span><span class="mtk18">var</span><span class="mtk1"> </span><span class="mtk33">b</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk12">0.0</span></span><br/><span><span class="mtk18">var</span><span class="mtk1"> </span><span class="mtk33">c</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk12">0.0</span></span><br/><span><span class="mtk18">var</span><span class="mtk1"> </span><span class="mtk33">green_bars_count</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk12">0</span></span><br/><span><span class="mtk18">if</span><span class="mtk1"> </span><span class="mtk11">close</span><span class="mtk1"> </span><span class="mtk18">&gt;</span><span class="mtk1"> </span><span class="mtk11">open</span></span><br/><span><span class="mtk1">    </span><span class="mtk18">var</span><span class="mtk1"> </span><span class="mtk33">x</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk11">close</span></span><br/><span><span class="mtk1">    </span><span class="mtk33">b</span><span class="mtk1"> </span><span class="mtk18">:=</span><span class="mtk1"> </span><span class="mtk33">x</span></span><br/><span><span class="mtk1">    </span><span class="mtk33">green_bars_count</span><span class="mtk1"> </span><span class="mtk18">:=</span><span class="mtk1"> </span><span class="mtk33">green_bars_count</span><span class="mtk1"> </span><span class="mtk18">+</span><span class="mtk1"> </span><span class="mtk12">1</span></span><br/><span><span class="mtk1">    </span><span class="mtk18">if</span><span class="mtk1"> </span><span class="mtk33">green_bars_count</span><span class="mtk1"> </span><span class="mtk18">&gt;=</span><span class="mtk1"> </span><span class="mtk12">10</span></span><br/><span><span class="mtk1">        </span><span class="mtk18">var</span><span class="mtk1"> </span><span class="mtk33">y</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk11">close</span></span><br/><span><span class="mtk1">        </span><span class="mtk33">c</span><span class="mtk1"> </span><span class="mtk18">:=</span><span class="mtk1"> </span><span class="mtk33">y</span></span><br/><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">a</span><span class="mtk13">)</span></span><br/><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">b</span><span class="mtk13">)</span></span><br/><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">c</span><span class="mtk13">)</span></span><br/></code></pre><div class="tv-pine-reference-item__text tv-text">The variable 'a' keeps the closing price of the first bar for each bar in the series.</div><div class="tv-pine-reference-item__text tv-text">The variable 'b' keeps the closing price of the first "green" bar in the series.</div><div class="tv-pine-reference-item__text tv-text">The variable 'c' keeps the closing price of the tenth "green" bar in the series.</div></div>
</div>
</section><section id="pine-script-reference_v5_kw_varip.html" class="content-section">
<h2 class="tv-pine-reference-item__header">pine-script-reference_v5_kw_varip</h2>
<div class="content-section">
<div class="tv-pine-reference-item__content"><div class="tv-pine-reference-item__header-wrapper"><div class="tv-pine-reference-item__header_h3_wrapper"><h3 class="tv-pine-reference-item__header">varip</h3></div></div><div class="tv-pine-reference-item__text tv-text"><strong>varip</strong> (var intrabar persist) is the keyword used for the assignment and one-time initialization of a variable or a field of a user-defined <a class="js-reference" data-href="kw_type" href="#kw_type">type</a>. It’s similar to the <a class="js-reference" data-href="kw_var" href="#kw_var">var</a> keyword, but variables and fields declared with <a class="js-reference" data-href="kw_varip" href="#kw_varip">varip</a> retain their values between executions of the script on the same bar.</div><div class="tv-pine-reference-item__sub-header">Syntax</div><pre class="tv-pine-reference-item__syntax selected">varip [&lt;variable_type&gt; ]&lt;variable_name&gt; = &lt;expression&gt;

[export ]type &lt;UDT_identifier&gt;
    varip &lt;field_type&gt; &lt;field_name&gt; [= &lt;value&gt;]</pre><div class="tv-pine-reference-item__text tv-text">where:</div><div class="tv-pine-reference-item__text tv-text"><strong>variable_type</strong> - An optional fundamental type (<a class="js-reference" data-href="type_int" href="#type_int">int</a>, <a class="js-reference" data-href="type_float" href="#type_float">float</a>, <a class="js-reference" data-href="type_bool" href="#type_bool">bool</a>, <a class="js-reference" data-href="type_color" href="#type_color">color</a>, <a class="js-reference" data-href="type_string" href="#type_string">string</a>) or a user-defined type, or an array or matrix of one of those types. Special types are not compatible with this keyword.</div><div class="tv-pine-reference-item__text tv-text"><strong>variable_name</strong> - A <a href="https://www.tradingview.com/pine-script-docs/language/identifiers/" target="_blank">valid identifier</a>. The variable can also be an object created from a UDT.</div><div class="tv-pine-reference-item__text tv-text"><strong>expression</strong> - Any arithmetic expression, just as when defining a regular variable. The expression will be calculated and assigned to the variable only once, on the first bar.</div><div class="tv-pine-reference-item__text tv-text"><strong>UDT_identifier, field_type, field_name, value</strong> - Constructs related to user-defined types as described in the <a class="js-reference" data-href="kw_type" href="#kw_type">type</a> section.</div><div class="tv-pine-reference-item__sub-header tv-pine-reference-item__example-header"><div class="example-section"><span>Example</span></div></div><pre class="tv-pine-reference-item__example"><code class="tv-pine-light" data-id="kw_varip_example_0" data-lang="pine_v5"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br/><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"varip"</span><span class="mtk13">)</span></span><br/><span><span class="mtk18">varip</span><span class="mtk1"> </span><span class="mtk18 mtkb">int</span><span class="mtk1"> </span><span class="mtk33">v</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk12">-1</span></span><br/><span><span class="mtk33">v</span><span class="mtk1"> </span><span class="mtk18">:=</span><span class="mtk1"> </span><span class="mtk33">v</span><span class="mtk1"> </span><span class="mtk18">+</span><span class="mtk1"> </span><span class="mtk12">1</span></span><br/><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">v</span><span class="mtk13">)</span></span><br/></code></pre><div class="tv-pine-reference-item__text tv-text">With <a class="js-reference" data-href="kw_var" href="#kw_var">var</a>, <code>v</code> would equal the value of the <a class="js-reference" data-href="var_bar_index" href="#var_bar_index">bar_index</a>. On historical bars, where the script calculates only once per chart bar, the value of <code>v</code> is the same as with <a class="js-reference" data-href="kw_var" href="#kw_var">var</a>. However, on realtime bars, the script will evaluate the expression on each new chart update, producing a different result.</div><div class="tv-pine-reference-item__sub-header tv-pine-reference-item__example-header"><span>Example</span></div><pre class="tv-pine-reference-item__example"><code class="tv-pine-light" data-id="kw_varip_example_1" data-lang="pine_v5"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br/><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"varip with types"</span><span class="mtk13">)</span></span><br/><span><span class="mtk18">type</span><span class="mtk1"> </span><span class="mtk33">barData</span></span><br/><span><span class="mtk1">    </span><span class="mtk18 mtkb">int</span><span class="mtk1"> </span><span class="mtk33">index</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk12">-1</span></span><br/><span><span class="mtk1">    </span><span class="mtk18">varip</span><span class="mtk1"> </span><span class="mtk18 mtkb">int</span><span class="mtk1"> </span><span class="mtk33">ticks</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk12">-1</span></span><br/><span><span></span></span><br/><span><span class="mtk18">var</span><span class="mtk1"> </span><span class="mtk33">currBar</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk33">barData</span><span class="mtk1">.</span><span class="mtk15">new</span><span class="mtk13">()</span></span><br/><span><span class="mtk33">currBar</span><span class="mtk1">.</span><span class="mtk33">index</span><span class="mtk1"> </span><span class="mtk18">+=</span><span class="mtk1"> </span><span class="mtk12">1</span></span><br/><span><span class="mtk33">currBar</span><span class="mtk1">.</span><span class="mtk33">ticks</span><span class="mtk1"> </span><span class="mtk18">+=</span><span class="mtk1"> </span><span class="mtk12">1</span></span><br/><span><span></span></span><br/><span><span class="mtk9">// Will be equal to bar_index on all bars</span></span><br/><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">currBar</span><span class="mtk1">.</span><span class="mtk33">index</span><span class="mtk13">)</span></span><br/><span><span class="mtk9">// In real time, will increment per every tick on </span><span class="mtk9">the chart</span></span><br/><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">currBar</span><span class="mtk1">.</span><span class="mtk33">ticks</span><span class="mtk13">)</span></span><br/></code></pre><div class="tv-pine-reference-item__text tv-text">The same <a class="js-reference" data-href="op_+=" href="#op_+=">+=</a> operation applied to both the <code>index</code> and <code>ticks</code> fields results in different real-time values because <code>ticks</code> increases on every chart update, while <code>index</code> only does so once per bar. Note how the <code>currBar</code> object does not use the <a class="js-reference" data-href="kw_varip" href="#kw_varip">varip</a> keyword. The <code>ticks</code> field of the object can increment on every tick, but the reference itself is defined once and then stays unchanged. If we were to declare <code>currBar</code> using <a class="js-reference" data-href="kw_varip" href="#kw_varip">varip</a>, the behavior of <code>index</code> would remain unchanged because while the reference to the type instance would persist between chart updates, the <code>index</code> field of the object would not.</div><div class="tv-pine-reference-item__sub-header">Remarks</div><div class="tv-pine-reference-item__text tv-text">When using <a class="js-reference" data-href="kw_varip" href="#kw_varip">varip</a> to declare variables in strategies that may execute more than once per historical chart bar, the values of such variables are preserved across successive iterations of the script on the same bar.</div><div class="tv-pine-reference-item__text tv-text">The effect of <a class="js-reference" data-href="kw_varip" href="#kw_varip">varip</a> eliminates the <a href="https://www.tradingview.com/pine-script-docs/language/execution-model/#calculation-based-on-realtime-bars" target="_blank">rollback</a> of variables before each successive execution of a script on the same bar.</div></div>
</div>
</section><section id="pine-script-reference_v5_kw_while.html" class="content-section">
<h2 class="tv-pine-reference-item__header">pine-script-reference_v5_kw_while</h2>
<div class="content-section">
<div class="tv-pine-reference-item__content"><div class="tv-pine-reference-item__header-wrapper"><div class="tv-pine-reference-item__header_h3_wrapper"><h3 class="tv-pine-reference-item__header">while</h3></div></div><div class="tv-pine-reference-item__text tv-text">The <code>while</code> statement allows the conditional iteration of a local code block.</div><div class="tv-pine-reference-item__sub-header">Syntax</div><pre class="tv-pine-reference-item__syntax selected">variable_declaration = while condition
    …
    continue
    …
    break
    …
    return_expression</pre><div class="tv-pine-reference-item__text tv-text">where:</div><div class="tv-pine-reference-item__text tv-text"><strong>variable_declaration</strong> - An optional variable declaration. The <code>return expression</code> can provide the initialization value for this variable.</div><div class="tv-pine-reference-item__text tv-text"><strong>condition</strong> - when true, the local block of the <code>while</code> statement is executed. When false, execution of the script resumes after the <code>while</code> statement.</div><div class="tv-pine-reference-item__text tv-text"><strong>continue</strong> - The <code>continue</code> keyword causes the loop to branch to its next iteration.</div><div class="tv-pine-reference-item__text tv-text"><strong>break</strong> - The <code>break</code> keyword causes the loop to terminate. The script's execution resumes after the <code>while</code> statement.</div><div class="tv-pine-reference-item__text tv-text"><strong>return_expression</strong> - An optional line providing the <code>while</code> statement's returning value.</div><div class="tv-pine-reference-item__sub-header tv-pine-reference-item__example-header"><div class="example-section"><span>Example</span></div></div><pre class="tv-pine-reference-item__example"><code class="tv-pine-light" data-id="kw_while_example_0" data-lang="pine_v5"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br/><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"while"</span><span class="mtk13">)</span></span><br/><span><span class="mtk9">// This is a simple example of calculating a facto</span><span class="mtk9">rial using a while loop.</span></span><br/><span><span class="mtk18 mtkb">int</span><span class="mtk1"> </span><span class="mtk33">i_n</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk16">input.int</span><span class="mtk13">(</span><span class="mtk12">10</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk29">"Factorial Size"</span><span class="mtk18">,</span><span class="mtk1"> </span><span class="mtk33">minval</span><span class="mtk18">=</span><span class="mtk12">0</span><span class="mtk13">)</span></span><br/><span><span class="mtk18 mtkb">int</span><span class="mtk1"> </span><span class="mtk33">counter</span><span class="mtk1">   </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk33">i_n</span></span><br/><span><span class="mtk18 mtkb">int</span><span class="mtk1"> </span><span class="mtk33">factorial</span><span class="mtk1"> </span><span class="mtk18">=</span><span class="mtk1"> </span><span class="mtk12">1</span></span><br/><span><span class="mtk18">while</span><span class="mtk1"> </span><span class="mtk33">counter</span><span class="mtk1"> </span><span class="mtk18">&gt;</span><span class="mtk1"> </span><span class="mtk12">0</span></span><br/><span><span class="mtk1">    </span><span class="mtk33">factorial</span><span class="mtk1"> </span><span class="mtk18">:=</span><span class="mtk1"> </span><span class="mtk33">factorial</span><span class="mtk1"> </span><span class="mtk18">*</span><span class="mtk1"> </span><span class="mtk33">counter</span></span><br/><span><span class="mtk1">    </span><span class="mtk33">counter</span><span class="mtk1">   </span><span class="mtk18">:=</span><span class="mtk1"> </span><span class="mtk33">counter</span><span class="mtk1"> </span><span class="mtk18">-</span><span class="mtk1"> </span><span class="mtk12">1</span></span><br/><span><span></span></span><br/><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">factorial</span><span class="mtk13">)</span></span><br/></code></pre><div class="tv-pine-reference-item__sub-header">Remarks</div><div class="tv-pine-reference-item__text tv-text">The local code block after the initial <code>while</code> line must be indented with four spaces or a tab. For the <code>while</code> loop to terminate, the boolean expression following <code>while</code> must eventually become false, or a <code>break</code> must be executed.</div></div>
</div>
</section>
        
    <div class="nav-buttons">
        <button onclick="window.scrollTo(0, 0)" class="nav-button">Back to Top</button>
        <a href="../pinescript-v5-reference.html" class="nav-button">Back to TOC</a>
    </div>
    
    </body>
    </html>
    
